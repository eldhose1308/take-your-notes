"use strict";(self.webpackChunktake_your_notes_v1=self.webpackChunktake_your_notes_v1||[]).push([[824],{7359:(e,s,t)=>{t.d(s,{p:()=>n});t(2791);var a=t(184);const r={info:{border:"border-info",text:"text-info"},error:{border:"border-destructive",text:"text-destructive"}},i={info:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-info",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("path",{d:"M12 16v-4"}),(0,a.jsx)("path",{d:"M12 8h.01"})]}),error:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-triangle-alert",children:[(0,a.jsx)("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}),(0,a.jsx)("path",{d:"M12 9v4"}),(0,a.jsx)("path",{d:"M12 17h.01"})]})},n=e=>{const{type:s="error",children:t}=e;return(0,a.jsxs)("div",{className:"flex text-sm my-2 px-4 py-2 bg-default border-l ".concat(r[s].border," rounded-md"),children:[(0,a.jsx)("div",{className:"flex ".concat(r[s].text," items-center mr-2"),children:i[s]}),(0,a.jsx)("div",{className:"flex flex-col",children:t})]})}},921:(e,s,t)=>{t.r(s),t.d(s,{default:()=>H});var a=t(2791),r=t(7155),i=t(9732);const n=()=>{const[e,s]=(0,a.useState)({}),[t,n]=(0,a.useState)("none"),{logout:o}=(0,r.Z)();return(0,a.useEffect)((()=>{(async()=>{try{n("loading");const e=await i.jg();s(e),n("success")}catch(e){const{statusCode:s}=e||{};if(401===s)return void o();n("failure")}})()}),[]),{fetchStatus:t,userDetail:e,setUserDetail:s}};var o=t(3499),l=t(1039),d=t(6033),c=t(913),h=t(9435),u=t(8996);const x=(0,u.E)({password:(0,u.a)().password().min(8).max(32).build(),fullName:(0,u.a)().required().min(3).max(32).build(),userName:(0,u.a)().required().min(3).max(32).build()}),m=(0,u.E)({websiteLink:(0,u.a)().required().min(9).max(128).build(),phone:(0,u.a)().min(8).max(14).build(),bio:(0,u.a)().required().min(8).max(14).build()});var p=t(7359),v=t(184);const j={success:{heading:"Profile Updated",description:"Your profile has been updated successfully"},error:{heading:"Profile Update Failed",description:"There was an error updating your profile"}},w=e=>{const{identityData:s,onSave:t=(()=>{})}=e,{avatar:r,userName:i,fullName:n,email:o,bio:u,joinedAt:m,websiteLink:w,phone:g,postCounts:f,followers:y,following:N,rank:k}=s,b={userName:i,fullName:n},{register:C,submit:M,errors:L,errorMessages:Z,isSubmitting:z}=(0,h.Z)({schema:x,initialValues:b,messages:j});return(0,v.jsxs)(a.Fragment,{children:[(0,v.jsxs)(p.p,{type:"info",children:[(0,v.jsx)(c.Z,{textVariant:"light",size:"xs",children:"This section requires current password to update."}),(0,v.jsx)(c.Z,{textVariant:"light",size:"xs",children:"If you logged in with google, then password is not needed."})]}),(0,v.jsx)(d.Z,{variant:"another",className:"my-3"}),(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(l.zC,{type:"text",labelName:"Full Name",placeHolder:"Enter full name",validationMsg:L.fullName,...C("fullName")})}),(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(l.zC,{type:"text",labelName:"User Name",placeHolder:"Enter user name",validationMsg:L.userName,...C("userName")})}),(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(l.zC,{type:"password",labelName:"Password",placeHolder:"Enter password",validationMsg:L.password,...C("password")})}),(0,v.jsx)("div",{children:(0,v.jsx)(l.zx,{size:"xs",width:"none",variant:"accent",className:"mx-2",onClick:M((async e=>{const{fullName:s,userName:a,password:r}=e,i={full_name:s,user_name:a,password:r};try{await t({basicInfo:i})}catch(n){throw n}})),children:"Update Profile"})})]})},g=e=>{const{identityData:s,onSave:t=(()=>{})}=e,{avatar:r,userName:i,fullName:n,email:o,bio:u,joinedAt:x,websiteLink:j,phone:w,postCounts:g,followers:f,following:y,rank:N}=s,k={websiteLink:j,phone:w,bio:u},{register:b,submit:C,errors:M,isSubmitting:L}=(0,h.Z)({schema:m,initialValues:k});return(0,v.jsxs)(a.Fragment,{children:[(0,v.jsx)(p.p,{type:"info",children:(0,v.jsx)(c.Z,{textVariant:"light",size:"xs",children:"You can directly update these information without password."})}),(0,v.jsx)(d.Z,{variant:"another",className:"my-3"}),(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(l.zC,{type:"text",labelName:"Website",placeHolder:"Enter website link",validationMsg:M.websiteLink,...b("websiteLink")})}),(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(l.zC,{type:"text",labelName:"Phone",placeHolder:"Enter phone",validationMsg:M.phone,...b("phone")})}),(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(l.Kx,{labelName:"Bio",placeHolder:"Enter a small summary about yourself",validationMsg:M.bio,...b("bio")})}),(0,v.jsx)("div",{children:(0,v.jsx)(l.zx,{size:"xs",width:"none",variant:"accent",className:"mx-2",disabled:L,onClick:C((async e=>{const{websiteLink:s,bio:a}=e,r={website_link:s,bio:a};try{await t({extraInfo:r})}catch(i){console.log(i)}})),children:"Update Profile"})})]})};var f=t(2014),y=t(2831),N=t.n(y);t(3648);const k={none:"Upload",loading:"Uploading",failure:"Failed",completed:"Completed"},b=e=>{let{imageUrl:s,onCancel:t=(()=>{}),onUpload:r=(()=>{})}=e;const i=(0,a.useRef)(null),[n,o]=(0,a.useState)(null),[l,d]=(0,a.useState)(null),[h,u]=(0,a.useState)(!1),[x,m]=(0,a.useState)({status:"none",responseMessage:""}),[p,j]=(0,a.useState)("none"),{status:w,responseMessage:g}=x;(0,a.useEffect)((()=>{if(!s)return;const e=new(N())(i.current,{viewport:{width:200,height:200,type:"circle"},boundary:{width:300,height:300},showZoomer:!0});return o(e),e.bind({url:s}),()=>{e.destroy()}}),[s]);const y=()=>{t()};return(0,v.jsxs)("div",{children:[!h&&(0,v.jsx)("div",{className:"bg-secondary rounded-md",ref:i}),l?(0,v.jsxs)("div",{children:[(0,v.jsx)(c.Z,{className:"my-2",children:"Confirm your new display picture"}),g&&(0,v.jsx)("div",{className:"flex",children:g}),(0,v.jsx)(f.Z,{src:l,size:"lg"}),(0,v.jsxs)("div",{className:"flex text-sm my-2",children:[(0,v.jsxs)("span",{className:"flex items-center px-2 py-1 mx-2 bg-custom text-destructive hover-destructive hover-text-default rounded-md cursor-pointer",onClick:y,children:[(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-trash",children:[(0,v.jsx)("path",{d:"M3 6h18"}),(0,v.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,v.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),(0,v.jsx)("span",{className:"ml-2",children:"Cancel"})]}),(0,v.jsxs)("span",{className:"flex items-center px-2 py-1 mx-2 bg-custom text-primary hover-primary hover-text-default rounded-md cursor-pointer",onClick:async()=>{j("loading");try{const e=await r(l);j("completed"),m({status:"success",responseMessage:e})}catch(e){j("failure"),m({status:"error",responseMessage:e})}finally{setTimeout((()=>{j("none")}),1e3)}},children:[(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-upload animate-bounce-y",children:[(0,v.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,v.jsx)("polyline",{points:"17 8 12 3 7 8"}),(0,v.jsx)("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),(0,v.jsx)("span",{className:"ml-2",children:k[p]})]})]})]}):!h&&(0,v.jsxs)("div",{className:"flex text-sm my-2",children:[(0,v.jsxs)("span",{className:"flex items-center px-2 py-1 mx-2 bg-custom text-destructive hover-destructive hover-text-default rounded-md cursor-pointer",onClick:y,children:[(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-trash",children:[(0,v.jsx)("path",{d:"M3 6h18"}),(0,v.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,v.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),(0,v.jsx)("span",{className:"ml-2",children:"Cancel"})]}),(0,v.jsxs)("span",{className:"flex items-center px-2 py-1 mx-2 bg-custom text-primary hover-primary hover-text-default rounded-md cursor-pointer",onClick:()=>{n&&n.result({type:"base64",size:{width:300,height:300}}).then((e=>{d(e),u(!0)}))},children:[(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-move-right animate-bounce-x",children:[(0,v.jsx)("path",{d:"M18 8L22 12L18 16"}),(0,v.jsx)("path",{d:"M2 12H22"})]}),(0,v.jsx)("span",{className:"ml-2",children:"Proceed to preview"})]})]})]})};var C=t(4462);const M={none:"Remove",loading:"Removing",failure:"Failed",completed:"Removed",invalid:"No Avatar to remove"},L=e=>{const{identityData:s,onSave:t=(()=>{}),onRemove:r=(()=>{})}=e,{avatar:i,userName:n,fullName:o,email:l,bio:h,joinedAt:u,websiteLink:x,phone:m,postCounts:j,followers:w,following:g,rank:y}=s,{confirmDelete:N}=(0,C.h)(),[k,L]=(0,a.useState)(null),Z=(0,a.useRef)(null),[z,S]=(0,a.useState)({status:"none",responseMessage:""}),[U,V]=(0,a.useState)("none"),H=async()=>{if(!i)return V("invalid"),void setTimeout((()=>{V("none")}),1e3);V("loading");try{const e=await r({removeAvatar:!0});V("completed"),S({status:"success",responseMessage:e})}catch(e){V("failure"),S({status:"error",responseMessage:e})}finally{setTimeout((()=>{V("none")}),1e3)}};return(0,v.jsxs)("div",{children:[(0,v.jsxs)(p.p,{type:"info",children:[(0,v.jsx)(c.Z,{textVariant:"light",size:"xs",children:"Upload a new avatar."}),(0,v.jsx)(c.Z,{textVariant:"light",size:"xs",children:"You can crop as you wish."})]}),(0,v.jsx)(d.Z,{variant:"another",className:"my-3"}),k?(0,v.jsx)(b,{imageUrl:k,onCancel:()=>{L(null)},onUpload:async e=>{try{await t({avatar:e}),L(null)}catch(s){const{message:e}=s;throw e}}}):(0,v.jsxs)(a.Fragment,{children:[(0,v.jsx)(f.Z,{name:o,src:i,size:"lg"},i),(0,v.jsxs)("div",{className:"flex text-sm my-2",children:[(0,v.jsxs)("span",{className:"flex items-center px-2 py-1 mx-2 bg-custom text-destructive hover-destructive hover-text-default rounded-md cursor-pointer ".concat(i?"":"opacity-50"),onClick:async()=>{await N(H)},children:[(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-trash",children:[(0,v.jsx)("path",{d:"M3 6h18"}),(0,v.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,v.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),(0,v.jsx)("span",{className:"ml-2",children:M[U]})]}),(0,v.jsxs)("span",{className:"flex items-center px-2 py-1 mx-2 bg-custom text-primary hover-primary hover-text-default rounded-md cursor-pointer",onClick:()=>{Z.current.click()},children:[(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-upload",children:[(0,v.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,v.jsx)("polyline",{points:"17 8 12 3 7 8"}),(0,v.jsx)("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),(0,v.jsx)("span",{className:"ml-2",children:"Upload new photo"})]}),(0,v.jsx)("input",{type:"file",ref:Z,onChange:e=>{const s=e.target.files[0];if(s){const e=new FileReader;e.onloadend=()=>{L(e.result)},e.readAsDataURL(s)}},className:"hidden"})]})]}),(0,v.jsxs)("div",{className:"border-2 border-another bg-light mt-8 p-4 rounded-md",children:[(0,v.jsx)(c.Z,{textVariant:"none",children:"Upload a new avatar."}),(0,v.jsx)(c.Z,{textVariant:"none",children:"You can crop as you wish."})]})]})},Z=(e,s)=>{switch(e){case"avatar":return(0,v.jsx)(L,{...s});case"identity":return(0,v.jsx)(w,{...s});case"extra":return(0,v.jsx)(g,{...s});default:return(0,v.jsx)("p",{children:"No Form Available"})}},z=[{id:"avatar",label:"Avatar",icon:(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-image",children:[(0,v.jsx)("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),(0,v.jsx)("circle",{cx:"9",cy:"9",r:"2"}),(0,v.jsx)("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]})},{id:"identity",label:"Identity",icon:(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-user-round-pen",children:[(0,v.jsx)("path",{d:"M2 21a8 8 0 0 1 10.821-7.487"}),(0,v.jsx)("path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"}),(0,v.jsx)("circle",{cx:"10",cy:"8",r:"5"})]})},{id:"extra",label:"Extra",icon:(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-file-text",children:[(0,v.jsx)("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),(0,v.jsx)("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}),(0,v.jsx)("path",{d:"M10 9H8"}),(0,v.jsx)("path",{d:"M16 13H8"}),(0,v.jsx)("path",{d:"M16 17H8"})]})},{id:"change_password",label:"Change Password",icon:(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-key-round",children:[(0,v.jsx)("path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z"}),(0,v.jsx)("circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor"})]})}];var S=t(7345),U=t(9722),V=t(8301);const H=()=>{const{updateUserData:e}=(0,r.Z)(),{userDetail:s,fetchStatus:t,setUserDetail:a}=n(),i=async s=>{try{const t=await e(s);a((e=>({...e,...t})))}catch(t){throw t}};return(0,v.jsx)("div",{className:"text-default m-5",children:(0,v.jsxs)("div",{className:"flex",children:[(0,v.jsxs)("div",{className:"flex flex-col mr-2 my-4 grow-2 basis-0",children:[(0,v.jsx)(V.Z,{userDetail:s,fetchStatus:t}),(0,v.jsx)(d.Z,{className:"my-3"}),(0,v.jsx)(U.Z,{direction:"right",children:(0,v.jsx)("div",{className:"flex mx-4",children:"success"===t&&(0,v.jsx)(S.Z,{initialTabIndex:2,userDetail:s})})})]}),(0,v.jsx)("div",{className:"flex flex-col my-4 grow-2 basis-auto",children:(0,v.jsx)("div",{className:"bg-default p-1 text-sm rounded-md",children:(0,v.jsx)(o.Z,{tabItems:z,renderForm:Z,additionalProps:{identityData:s,onSave:i,onRemove:i}})})})]})})}}}]);
//# sourceMappingURL=824.bd0acf00.chunk.js.map