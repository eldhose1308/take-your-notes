"use strict";(self.webpackChunktake_your_notes_v1=self.webpackChunktake_your_notes_v1||[]).push([[99],{921:(e,s,t)=>{t.r(s),t.d(s,{default:()=>F});var a=t(2791),i=t(7155),r=t(9732);const n=()=>{const[e,s]=(0,a.useState)({}),[t,n]=(0,a.useState)("none"),{logout:o}=(0,i.Z)();return(0,a.useEffect)((()=>{(async()=>{try{n("loading");const e=await r.jg();s(e),n("success")}catch(e){const{statusCode:s}=e||{};if(401===s)return void o();n("failure")}})()}),[]),{fetchStatus:t,userDetail:e,setUserDetail:s}};var o=t(3499),l=t(1039),d=t(6033),c=t(913),u=t(9435),h=t(8996);const x=(0,h.E)({password:(0,h.a)().password().min(8).max(32).build(),fullName:(0,h.a)().required().min(3).max(32).build(),userName:(0,h.a)().required().min(3).max(32).build()}),m=(0,h.E)({websiteLink:(0,h.a)().required().min(9).max(128).build(),phone:(0,h.a)().min(8).max(14).build(),bio:(0,h.a)().required().min(8).max(14).build()});var p=t(7359),v=t(184);const j={success:{heading:"Profile Updated",description:"Your profile has been updated successfully"},error:{heading:"Profile Update Failed",description:"There was an error updating your profile"}},w={none:"Update Profile",loading:"Updating your profile",failure:"Failed to update",completed:"Updated successfully"},g=e=>{const{identityData:s,onSave:t=(()=>{})}=e,{avatar:i,userName:r,fullName:n,email:o,bio:h,joinedAt:m,websiteLink:g,phone:f,postCounts:y,followers:N,following:b,rank:k}=s,C={userName:r,fullName:n},[M,L]=(0,a.useState)("none"),{register:Z,submit:S,errors:U,errorMessages:z,isSubmitting:V}=(0,u.Z)({schema:x,initialValues:C,messages:j});return(0,v.jsxs)(a.Fragment,{children:[(0,v.jsxs)(p.p,{type:"info",children:[(0,v.jsx)(c.Z,{textVariant:"light",size:"xs",children:"This section requires current password to update."}),(0,v.jsx)(c.Z,{textVariant:"light",size:"xs",children:"If you logged in with google, then password is not needed."})]}),(0,v.jsx)(d.Z,{variant:"another",className:"my-3"}),(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(l.zC,{type:"text",labelName:"Full Name",placeHolder:"Enter full name",validationMsg:U.fullName,...Z("fullName")})}),(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(l.zC,{type:"text",labelName:"User Name",placeHolder:"Enter user name",validationMsg:U.userName,...Z("userName")})}),(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(l.zC,{type:"password",labelName:"Password",placeHolder:"Enter password",validationMsg:U.password,...Z("password")})}),(0,v.jsx)("div",{children:(0,v.jsx)(l.zx,{size:"xs",width:"none",variant:"accent",className:"mx-2",onClick:S((async e=>{const{fullName:s,userName:a,password:i}=e,r={full_name:s,user_name:a,password:i};L("loading");try{await t({basicInfo:r}),L("completed")}catch(n){throw L("failure"),n}finally{setTimeout((()=>{L("none")}),1e3)}})),buttonStatus:M,children:w[M]})})]})},f={none:"Update Profile",loading:"Updating your profile",failure:"Failed to update",completed:"Updated successfully"},y=e=>{const{identityData:s,onSave:t=(()=>{})}=e,{avatar:i,userName:r,fullName:n,email:o,bio:h,joinedAt:x,websiteLink:j,phone:w,postCounts:g,followers:y,following:N,rank:b}=s,k={websiteLink:j,phone:w,bio:h},[C,M]=(0,a.useState)("none"),{register:L,submit:Z,errors:S,isSubmitting:U}=(0,u.Z)({schema:m,initialValues:k});return(0,v.jsxs)(a.Fragment,{children:[(0,v.jsx)(p.p,{type:"info",children:(0,v.jsx)(c.Z,{textVariant:"light",size:"xs",children:"You can directly update these information without password."})}),(0,v.jsx)(d.Z,{variant:"another",className:"my-3"}),(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(l.zC,{type:"text",labelName:"Website",placeHolder:"Enter website link",validationMsg:S.websiteLink,...L("websiteLink")})}),(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(l.zC,{type:"text",labelName:"Phone",placeHolder:"Enter phone",validationMsg:S.phone,...L("phone")})}),(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(l.Kx,{labelName:"Bio",placeHolder:"Enter a small summary about yourself",validationMsg:S.bio,...L("bio")})}),(0,v.jsx)("div",{children:(0,v.jsx)(l.zx,{size:"xs",width:"none",variant:"accent",className:"mx-2",disabled:U,onClick:Z((async e=>{const{websiteLink:s,bio:a}=e,i={website_link:s,bio:a};M("loading");try{await t({extraInfo:i}),M("completed")}catch(r){throw M("failure"),r}finally{setTimeout((()=>{M("none")}),1e3)}})),buttonStatus:C,children:f[C]})})]})};var N=t(2014),b=t(2831),k=t.n(b);t(3648);const C={none:"Upload",loading:"Uploading",failure:"Failed",completed:"Completed"},M=e=>{let{imageUrl:s,onCancel:t=(()=>{}),onUpload:i=(()=>{})}=e;const r=(0,a.useRef)(null),[n,o]=(0,a.useState)(null),[l,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(!1),[x,m]=(0,a.useState)({status:"none",responseMessage:""}),[p,j]=(0,a.useState)("none"),{status:w,responseMessage:g}=x;(0,a.useEffect)((()=>{if(!s)return;const e=new(k())(r.current,{viewport:{width:200,height:200,type:"circle"},boundary:{width:300,height:300},showZoomer:!0});return o(e),e.bind({url:s}),()=>{e.destroy()}}),[s]);const f=()=>{t()};return(0,v.jsxs)("div",{children:[!u&&(0,v.jsx)("div",{className:"bg-secondary rounded-md",ref:r}),l?(0,v.jsxs)("div",{children:[(0,v.jsx)(c.Z,{className:"my-2",children:"Confirm your new display picture"}),g&&(0,v.jsx)("div",{className:"flex",children:g}),(0,v.jsx)(N.Z,{src:l,size:"lg"}),(0,v.jsxs)("div",{className:"flex text-sm my-2",children:[(0,v.jsxs)("span",{className:"flex items-center px-2 py-1 mx-2 bg-custom text-destructive hover-destructive hover-text-default rounded-md cursor-pointer",onClick:f,children:[(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-trash",children:[(0,v.jsx)("path",{d:"M3 6h18"}),(0,v.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,v.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),(0,v.jsx)("span",{className:"ml-2",children:"Cancel"})]}),(0,v.jsxs)("span",{className:"flex items-center px-2 py-1 mx-2 bg-custom text-primary hover-primary hover-text-default rounded-md cursor-pointer",onClick:async()=>{j("loading");try{const e=await i(l);j("completed"),m({status:"success",responseMessage:e})}catch(e){j("failure"),m({status:"error",responseMessage:e})}finally{setTimeout((()=>{j("none")}),1e3)}},children:[(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-upload animate-bounce-y",children:[(0,v.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,v.jsx)("polyline",{points:"17 8 12 3 7 8"}),(0,v.jsx)("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),(0,v.jsx)("span",{className:"ml-2",children:C[p]})]})]})]}):!u&&(0,v.jsxs)("div",{className:"flex text-sm my-2",children:[(0,v.jsxs)("span",{className:"flex items-center px-2 py-1 mx-2 bg-custom text-destructive hover-destructive hover-text-default rounded-md cursor-pointer",onClick:f,children:[(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-trash",children:[(0,v.jsx)("path",{d:"M3 6h18"}),(0,v.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,v.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),(0,v.jsx)("span",{className:"ml-2",children:"Cancel"})]}),(0,v.jsxs)("span",{className:"flex items-center px-2 py-1 mx-2 bg-custom text-primary hover-primary hover-text-default rounded-md cursor-pointer",onClick:()=>{n&&n.result({type:"base64",size:{width:300,height:300}}).then((e=>{d(e),h(!0)}))},children:[(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-move-right animate-bounce-x",children:[(0,v.jsx)("path",{d:"M18 8L22 12L18 16"}),(0,v.jsx)("path",{d:"M2 12H22"})]}),(0,v.jsx)("span",{className:"ml-2",children:"Proceed to preview"})]})]})]})};var L=t(4462);const Z={none:"Remove",loading:"Removing",failure:"Failed",completed:"Removed",invalid:"No Avatar to remove"},S=e=>{const{identityData:s,onSave:t=(()=>{}),onRemove:i=(()=>{})}=e,{avatar:r,userName:n,fullName:o,email:l,bio:u,joinedAt:h,websiteLink:x,phone:m,postCounts:j,followers:w,following:g,rank:f}=s,{confirmDelete:y}=(0,L.h)(),[b,k]=(0,a.useState)(null),C=(0,a.useRef)(null),[S,U]=(0,a.useState)({status:"none",responseMessage:""}),[z,V]=(0,a.useState)("none"),H=async()=>{if(!r)return V("invalid"),void setTimeout((()=>{V("none")}),1e3);V("loading");try{const e=await i({removeAvatar:!0});V("completed"),U({status:"success",responseMessage:e})}catch(e){V("failure"),U({status:"error",responseMessage:e})}finally{setTimeout((()=>{V("none")}),1e3)}};return(0,v.jsxs)("div",{children:[(0,v.jsxs)(p.p,{type:"info",children:[(0,v.jsx)(c.Z,{textVariant:"light",size:"xs",children:"Upload a new avatar."}),(0,v.jsx)(c.Z,{textVariant:"light",size:"xs",children:"You can crop as you wish."})]}),(0,v.jsx)(d.Z,{variant:"another",className:"my-3"}),b?(0,v.jsx)(M,{imageUrl:b,onCancel:()=>{k(null)},onUpload:async e=>{try{await t({avatar:e}),k(null)}catch(s){const{message:e}=s;throw e}}}):(0,v.jsxs)(a.Fragment,{children:[(0,v.jsx)(N.Z,{name:o,src:r,size:"lg"},r),(0,v.jsxs)("div",{className:"flex text-sm my-2",children:[(0,v.jsxs)("span",{className:"flex items-center px-2 py-1 mx-2 bg-custom text-destructive hover-destructive hover-text-default rounded-md cursor-pointer ".concat(r?"":"opacity-50"),onClick:async()=>{await y(H)},children:[(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-trash",children:[(0,v.jsx)("path",{d:"M3 6h18"}),(0,v.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,v.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),(0,v.jsx)("span",{className:"ml-2",children:Z[z]})]}),(0,v.jsxs)("span",{className:"flex items-center px-2 py-1 mx-2 bg-custom text-primary hover-primary hover-text-default rounded-md cursor-pointer",onClick:()=>{C.current.click()},children:[(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-upload",children:[(0,v.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,v.jsx)("polyline",{points:"17 8 12 3 7 8"}),(0,v.jsx)("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),(0,v.jsx)("span",{className:"ml-2",children:"Upload new photo"})]}),(0,v.jsx)("input",{type:"file",ref:C,onChange:e=>{const s=e.target.files[0];if(s){const e=new FileReader;e.onloadend=()=>{k(e.result)},e.readAsDataURL(s)}},className:"hidden"})]})]}),(0,v.jsxs)("div",{className:"border-2 border-another bg-light mt-8 p-4 rounded-md",children:[(0,v.jsx)(c.Z,{textVariant:"none",children:"Upload a new avatar."}),(0,v.jsx)(c.Z,{textVariant:"none",children:"You can crop as you wish."})]})]})},U=(e,s)=>{switch(e){case"avatar":return(0,v.jsx)(S,{...s});case"identity":return(0,v.jsx)(g,{...s});case"extra":return(0,v.jsx)(y,{...s});default:return(0,v.jsx)("p",{children:"No Form Available"})}},z=[{id:"avatar",label:"Avatar",icon:(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-image",children:[(0,v.jsx)("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),(0,v.jsx)("circle",{cx:"9",cy:"9",r:"2"}),(0,v.jsx)("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]})},{id:"identity",label:"Identity",icon:(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-user-round-pen",children:[(0,v.jsx)("path",{d:"M2 21a8 8 0 0 1 10.821-7.487"}),(0,v.jsx)("path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"}),(0,v.jsx)("circle",{cx:"10",cy:"8",r:"5"})]})},{id:"extra",label:"Extra",icon:(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-file-text",children:[(0,v.jsx)("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),(0,v.jsx)("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}),(0,v.jsx)("path",{d:"M10 9H8"}),(0,v.jsx)("path",{d:"M16 13H8"}),(0,v.jsx)("path",{d:"M16 17H8"})]})},{id:"change_password",label:"Change Password",icon:(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-key-round",children:[(0,v.jsx)("path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z"}),(0,v.jsx)("circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor"})]})}];var V=t(7345),H=t(9722),D=t(6775);const F=()=>{const{updateUserData:e}=(0,i.Z)(),{userDetail:s,fetchStatus:t,setUserDetail:a}=n(),r=async s=>{try{const t=await e(s);a((e=>({...e,...t})))}catch(t){throw t}};return(0,v.jsx)("div",{className:"text-default m-5",children:(0,v.jsxs)("div",{className:"flex",children:[(0,v.jsxs)("div",{className:"flex flex-col mr-2 my-4 grow-2 basis-0",children:[(0,v.jsx)(D.Z,{userDetail:s,fetchStatus:t}),(0,v.jsx)(d.Z,{className:"my-3"}),(0,v.jsx)(H.Z,{direction:"right",children:(0,v.jsx)("div",{className:"flex mx-4",children:"success"===t&&(0,v.jsx)(V.Z,{initialTabIndex:2,userDetail:s})})})]}),(0,v.jsx)("div",{className:"flex flex-col my-4 grow-2 basis-auto",children:(0,v.jsx)("div",{className:"bg-default p-1 text-sm rounded-md",children:(0,v.jsx)(o.Z,{tabItems:z,renderForm:U,additionalProps:{identityData:s,onSave:r,onRemove:r}})})})]})})}}}]);
//# sourceMappingURL=99.05400d84.chunk.js.map