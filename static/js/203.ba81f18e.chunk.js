"use strict";(self.webpackChunktake_your_notes_v1=self.webpackChunktake_your_notes_v1||[]).push([[203],{1475:(t,e,s)=>{s.d(e,{tb:()=>o.Z});s(542),s(6003);var o=s(6051)},6843:(t,e,s)=>{s.d(e,{Z:()=>r});var o=s(2791),a=s(1087),n=s(184);const r=t=>{let{items:e=[],links:s=[]}=t;const r=e.length-1;return(0,n.jsx)("div",{className:"flex rounded-lg px-2 my-2 text-xs bg-default text-secondary",children:e.map(((t,e)=>{const c=e===r;return(0,n.jsxs)(o.Fragment,{children:[s[e]?(0,n.jsx)(a.rU,{to:s[e],children:(0,n.jsx)("span",{className:"".concat(c?"text-default":""),children:t})}):(0,n.jsx)("span",{className:"".concat(c?"text-default":""),children:t}),!c&&(0,n.jsx)("span",{className:"flex items-center text-default mx-1",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-right",children:(0,n.jsx)("path",{d:"m9 18 6-6-6-6"})})})]})}))})}},475:(t,e,s)=>{s.d(e,{a:()=>o});const o={SET_FIELDS:"SET_FIELDS",SET_TAGS:"SET_TAGS",SET_VISIBILITY:"SET_VISIBILITY",SET_CONTENT:"SET_CONTENT",SET_TITLE:"SET_TITLE",SET_CATEGORY:"SET_CATEGORY",RESET_FORM:"RESET_FORM"}},2144:(t,e,s)=>{s.d(e,{Qd:()=>a,XD:()=>n,ZM:()=>r});var o=s(184);const a={private:"private",public:"public"},n=[{id:a.private,label:"Private",modeElement:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-eye-off",children:[(0,o.jsx)("path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"}),(0,o.jsx)("path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242"}),(0,o.jsx)("path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"}),(0,o.jsx)("path",{d:"m2 2 20 20"})]})},{id:a.public,label:"Public",modeElement:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-eye",children:[(0,o.jsx)("path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}),(0,o.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})}],r="My First Post"},1172:(t,e,s)=>{s.d(e,{Z:()=>g});var o=s(2791),a=s(1087),n=s(7689),r=s(7128),c=s(7323),i=s(2144),l=s(475);const u={postTags:[],currentVisibilityMode:i.Qd.public,postTitle:i.ZM,postCategory:null,markdownContent:""},d=(t,e)=>{let{type:s,payload:o}=e;switch(s){case l.a.SET_FIELDS:return{...t,...o};case l.a.SET_TAGS:return{...t,postTags:o};case l.a.SET_VISIBILITY:return{...t,currentVisibilityMode:o};case l.a.SET_CONTENT:return{...t,markdownContent:o};case l.a.SET_TITLE:return{...t,postTitle:o};case l.a.SET_CATEGORY:return{...t,postCategory:o};case l.a.RESET_FORM:return u;default:return t}};s(4921);var p=s(2817),h=s(775),y=s(7155);const g=()=>{const[t,e]=(0,a.lr)(),{id:s}=(0,n.UO)(),{toast:i}=(0,p.p)(),{logout:g}=(0,y.Z)(),[m,w]=(0,o.useReducer)(d,{...u}),[f,x]=(0,o.useState)("none"),v=(0,o.useCallback)((async t=>{try{const e=await r.TJ(t);return i({heading:"Post created successfully!",description:"Your post has been successfully published!",options:{position:"top-right"}}).success(),e}catch(e){const{message:t,statusCode:s}=e;throw 401===s&&g(),i({heading:"Oops! There was an error creating your post.",description:t,options:{position:"top-right"}}).error(),e}}),[]),T=(0,o.useCallback)((async(t,e)=>{try{const s=await r.CP(t,e);return i({heading:"Post updated successfully!",description:"Your post has been successfully updated!",options:{position:"top-right"}}).success(),s}catch(s){const{message:t}=s;throw i({heading:"Oops! There was an error updating your post.",description:t,options:{position:"top-right"}}).error(),s}}),[]),_=(0,o.useCallback)((async t=>{try{const e=await r.fR(t);return i({heading:"Post deleted successfully!",description:"Your post has been successfully deleted!",options:{position:"top-right"}}).success(),e}catch(e){const{message:t,statusCode:s}=e;throw 401===s&&g(),i({heading:"Oops! There was an error deleting your post.",description:t,options:{position:"top-right"}}).error(),e}}),[]),b=(0,o.useCallback)((async t=>{try{const e=await r.ts(t);return i({heading:"Post restored successfully!",description:"Your post has been successfully restored!",options:{position:"top-right"}}).success(),e}catch(e){const{message:t}=e;throw i({heading:"Oops! There was an error restoring your post.",description:t,options:{position:"top-right"}}).error(),e}}),[]);return(0,o.useEffect)((()=>{}),[s]),{fetchCategoriesData:async t=>{try{x("loading");const t=await c.hk();return x("success"),setTimeout((()=>{x("none")}),1e3),t}catch(e){x("failure")}},fetchMyPostsData:async t=>{try{x("loading");const e=await r.$n(t);return 0===e.length?x("empty"):(x("success"),setTimeout((()=>{x("none")}),1e3)),e}catch(e){const{statusCode:t}=e;throw 401===t&&g(),x("failure"),e}},fetchUsersPostItem:async()=>{if(!s)return;const{userName:t}=(0,h.bV)();try{x("loading");const e=await r.zQ({userName:t,postSlug:s}),{id:o,category:a,content:n,postTitle:c,visibility:i,user:u}=e||{},{categoryId:d,categoryName:p,categorySlug:h}=a||{},{fullName:y,avatar:g}=u||{},m={postId:o,markdownContent:n,postTitle:c,currentVisibilityMode:i,postCategory:{id:d,categoryName:p,categorySlug:h,value:h}};w({type:l.a.SET_FIELDS,payload:m}),x("success")}catch(e){x("failure")}},validatePostForm:t=>{const{postTags:e,currentVisibilityMode:s,postCategory:o,postTitle:a,markdownContent:n}=t;return o?s?a?n?[!1,""]:[!0,"Post content is missing"]:[!0,"Post Title is missing"]:[!0,"Post Visibility Mode is missing"]:[!0,"Category is missing"]},savePost:async()=>{const{postId:t,postTags:e,currentVisibilityMode:o,postCategory:a,postTitle:n,markdownContent:r}=m,c={category:a.id,content:r,post_title:n,visibility:o};return s?T(c,t):v(c)},deletePost:_,restorePost:b,postFormState:m,postFormDispatcher:w,fetchStatus:f}}},3203:(t,e,s)=>{s.r(e),s.d(e,{default:()=>f});var o=s(2791),a=s(1937),n=s(6843),r=(s(8189),s(6987)),c=s(6114),i=s(4232),l=s(4855),u=s(1172),d=s(475),p=s(1475),h=(s(1686),s(7359),s(913)),y=(s(3719),s(3479)),g=s(4462),m=s(2817),w=s(184);const f=()=>{const{navigateToList:t}=(0,l.Z)(),{confirmDelete:e}=(0,g.h)(),{toast:s}=(0,m.p)(),{postFormState:f,fetchUsersPostItem:x,postFormDispatcher:v,validatePostForm:T,savePost:_,fetchStatus:b}=(0,u.Z)(),{postTags:S,currentVisibilityMode:C,postCategory:E,postTitle:j,markdownContent:N}=f,{categoryName:k}=E||{},I=async()=>{try{await _()&&setTimeout((()=>{t()}),1300)}catch(e){throw e}};return(0,o.useEffect)((()=>{x()}),[]),"loading"===b?(0,w.jsxs)("div",{className:"m-5",children:[(0,w.jsx)(p.tb,{}),(0,w.jsx)(p.tb,{}),(0,w.jsx)(p.tb,{}),(0,w.jsx)(p.tb,{}),(0,w.jsx)(p.tb,{})]}):"failure"===b?(0,w.jsx)("div",{children:"Failed"}):(0,w.jsx)(o.Fragment,{children:(0,w.jsxs)("div",{className:"text-default m-5",children:[(0,w.jsxs)("div",{className:"flex items-center my-2",children:[(0,w.jsxs)(h.Z,{size:"lg",type:"h2",className:"flex mr-3",children:["Post page",(0,w.jsx)(y.Z,{})]}),(0,w.jsx)("div",{className:"flex text-sm p-2 bg-highlight rounded-md cursor-pointer mx-1",children:(0,w.jsx)(i.Z,{category:E,onChange:(t,e)=>{v({type:d.a.SET_CATEGORY,payload:e})}})})]}),(0,w.jsxs)("div",{className:"flex justify-between w-full ",children:[(0,w.jsx)("div",{className:"flex flex-col w-3/4",children:(0,w.jsx)("div",{children:(0,w.jsx)(n.Z,{items:[k||"Select a category",j]})})}),(0,w.jsxs)("div",{className:"flex flex-col",children:[(0,w.jsx)("div",{className:"",children:(0,w.jsx)(c.Z,{onChange:t=>{v({type:d.a.SET_VISIBILITY,payload:t})},currentMode:C})}),(0,w.jsx)("div",{onClick:async()=>{const t="public"===C?"Are you sure you want to publish this post to be visible to all users?":"Are you sure you want to save this post as only visible to you?",o="public"===C?"primary":"accent",a="public"===C?{none:"Save as public",loading:"Saving as a public post",failure:"Failed to save as a public post",completed:"Saved and visible to all users"}:{none:"Save as private",loading:"Saving as a private post",failure:"Failed to save as a private post",completed:"Saved and visible to you only"},[n,r]=T(f);if(n)return void s({heading:"Oops! Please verify the changes.",description:r,options:{position:"top-right"}}).error();await e(I,{variant:o,buttonStateValues:a,heading:"Save ".concat(C," Post"),message:t});return!1},className:"bg-accent border border-accent hover-text-default hover-border-accent hover-transparent text-custom text-sm my-2 p-1 px-2 cursor-pointer rounded-md",children:(0,w.jsxs)("span",{className:"flex",children:["Save",(0,w.jsx)("span",{className:"text-xs bg-secondary text-secondary border border-secondary px-1 mx-1 rounded-md",children:"\u2318 + Enter"})]})})]})]}),(0,w.jsxs)("div",{className:"editing-note py-2 bg-default shadow-xl rounded-lg",children:[(0,w.jsx)(r.Z,{className:"text-default text-lg mx-2",text:j,onSave:t=>{v({type:d.a.SET_TITLE,payload:t})}}),(0,w.jsx)("div",{className:"h-screen-1/2s overflow-scrolls",children:(0,w.jsx)(a.Z,{content:N,onChange:t=>{v({type:d.a.SET_CONTENT,payload:t})},isPreviewEnabled:!0})})]})]})})}},7323:(t,e,s)=>{s.d(e,{Bg:()=>w,Yl:()=>h,Zk:()=>i,rP:()=>l,zg:()=>u,hk:()=>d,wG:()=>p,N_:()=>f,t4:()=>g,ZV:()=>y,$A:()=>m});var o=s(8777),a=s(3003);var n=s(3630);const r=t=>{const{category_name:e,category_slug:s,category_icon:o,posts_count:a,followers_count:r,created_at:c,full_name:i="Admin",user_name:l,category_id:u,is_following:d,verified:p}=t;return{id:u,categoryName:e,categorySlug:s,categoryIcon:o,followers:r,posts:a,createdUser:i,createdUserName:l,createdAt:(0,n.B)(c),isFollowing:!!d,isVerified:!!Number(p)}},c=t=>{const{main_category_name:e,main_category_slug:s,created_at:o,main_category_id:a}=t;return{id:a,mainCategoryName:e,mainCategorySlug:s,createdAt:(0,n.B)(o)}},i=async function(t){try{const e=await async function(t){const e=(0,a.K)(o._n+"postCategories/my",t);return new a.Z(e).get().then((t=>t)).catch((t=>{throw t}))}(t),{data:s=[]}=e;return s.map(r)||[]}catch(e){throw e}},l=async function(t){const e=await async function(t){return new a.Z("".concat(o._n,"postCategories/my/").concat(t)).get().then((t=>t)).catch((t=>{throw t.response}))}(t),{data:s=[]}=e,n=(t=>{const{main_categories:e,...s}=t;return{...r(s),mainCategories:e.map(c)}})(s);return n||[]},u=async function(t){try{const e=await async function(t){const e=(0,a.K)(o._n+"postMainCategories",t);return new a.Z(e).get().then((t=>t)).catch((t=>{throw t}))}(t),{data:s=[]}=e;return s.map(c)||[]}catch(e){throw e}},d=async function(t){try{const e=await async function(t){const e=(0,a.K)(o._n+"postCategories",t);return new a.Z(e).get().then((t=>t)).catch((t=>{throw t}))}(t),{data:s=[]}=e;return s.map(r)||[]}catch(e){throw e}},p=async function(t){const e=await async function(t){return new a.Z(o._n+"postCategories/".concat(t)).get().then((t=>t)).catch((t=>{throw t.response}))}(t),{data:s=[]}=e;return r(s)||{}},h=async function(t){try{await async function(t){return new a.Z(o._n+"postCategories/".concat(t,"/follow")).post().then((t=>t)).catch((t=>{throw t}))}(t);return!0}catch(e){throw e}},y=async function(t){try{await async function(t){return new a.Z(o._n+"postCategories/".concat(t,"/unfollow")).post().then((t=>t)).catch((t=>{throw t}))}(t);return!0}catch(e){throw e}},g=async function(t){try{const e=await async function(t){return new a.Z(o._n+"postCategories").post(t).then((t=>t)).catch((t=>{throw t}))}(t),{data:s=[]}=e;return r(s)}catch(e){throw e}},m=async function(t,e){try{const s=await async function(t,e){return new a.Z(o._n+"postCategories/".concat(e)).put(t).then((t=>t)).catch((t=>{throw t.response}))}(t,e),{data:n=[]}=s;return r(n)}catch(s){throw s}},w=async function(t){try{return await async function(t){return new a.Z(o._n+"postCategories/".concat(t)).delete().then((t=>t)).catch((t=>{throw t}))}(t)}catch(e){throw e}},f=async function(t){try{return await async function(t){return new a.Z(o._n+"postCategories/".concat(t,"/restore")).post().then((t=>t)).catch((t=>{throw t}))}(t)}catch(e){throw e}}}}]);
//# sourceMappingURL=203.ba81f18e.chunk.js.map