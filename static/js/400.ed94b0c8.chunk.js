"use strict";(self.webpackChunktake_your_notes_v1=self.webpackChunktake_your_notes_v1||[]).push([[400],{792:(e,t,n)=>{n.d(t,{Z:()=>p});var s=n(2791),a=n(6215),o=n(1381),r=n(913),c=n(1039),i=(n(8189),n(7323)),l=n(1685),u=n(7359),d=n(6904),h=n(184);const g={none:"Create",loading:"Creating",failure:"Failed",completed:"Created"},y={none:"Update",loading:"Updating",failure:"Failed",completed:"Updated"},p=e=>{const{categoryModalData:t,onClose:n=(()=>{})}=e,{status:p,data:w={},onClick:m}=t||{},{id:x,categoryName:f=""}=w,C=x?y:g,_="".concat(x?"Update Category":"Create Category"),j="Are you sure you want to ".concat(x?"update the category":"create a new category","?"),[v,Z]=(0,s.useState)([]),[k,N]=(0,s.useState)([]),[P,b]=(0,s.useState)(f),[S,z]=(0,s.useState)("none"),[B,T]=(0,s.useState)(""),V=()=>{n(),b("")};(0,d.Z)(V,p);return(0,s.useEffect)((()=>{b(f)}),[f]),(0,s.useEffect)((()=>{(async()=>{try{const e=await i.zg();N(e)}catch(e){console.log(e)}})()}),[]),p?(0,h.jsx)(a.Z,{isShown:!0,hasOverlay:!0,size:"lg",children:(0,h.jsxs)(o.Zb,{variant:"ghost",rounded:"lg",children:[(0,h.jsxs)(o.Ol,{children:[(0,h.jsx)(r.Z,{size:"lg",children:_}),(0,h.jsx)(r.Z,{size:"xs",textVariant:"default",children:j}),x?(0,h.jsx)(r.Z,{size:"xs",textVariant:"bold",children:f}):null]}),(0,h.jsxs)(o.aY,{children:[(0,h.jsx)(c.zC,{type:"text",labelName:"New category name",placeholder:"Enter category name",value:P,onChange:b,size:"sm",isFocused:!0,validationMsg:{type:"error",messages:[B]}}),(0,h.jsx)("div",{className:"my-3",children:(0,h.jsx)(l.Z,{mainCategories:v,onChange:e=>{Z(e)},suggestions:k})}),(0,h.jsxs)(u.p,{type:"info",children:[(0,h.jsx)(r.Z,{textVariant:"light",size:"xs",children:"- While creating a new category, please verify the main categories/tags below."}),(0,h.jsx)(r.Z,{textVariant:"light",size:"xs",children:"- This ensures your category and posts can be easily found in user suggestions and properly grouped for processing."})]})]}),(0,h.jsxs)(o.eW,{className:"p-0 flex justify-between",children:[(0,h.jsx)(c.zx,{size:"xs",width:"none",variant:"custom",onClick:()=>{V()},children:"Cancel"}),(0,h.jsx)(c.zx,{size:"xs",width:"none",variant:"accent",onClick:async()=>{const e=v.map((e=>e.id)),t=(e=>e?(T(""),!0):(T("Please enter a category name"),!1))(P),n={category_name:P,main_category_ids:e};if(t)if(m){z("loading");try{await m(n,x),z("completed"),setTimeout((()=>{V()}),1e3)}catch(s){z("failure"),T(s)}finally{setTimeout((()=>{z("none")}),1e3)}}else V()},buttonStatus:S,children:C[S]})]})]})}):null}},1685:(e,t,n)=>{n.d(t,{Z:()=>r});var s=n(2791),a=n(4487),o=n(184);const r=e=>{const{mainCategories:t=[],suggestions:n=[],onChange:r=(()=>{}),onCreate:c=(()=>{}),className:i,...l}=e,[u,d]=(0,s.useState)(""),h=e=>t.slice(0,e).concat(t.slice(e+1));return(0,o.jsx)(s.Fragment,{children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex max-w-mds justify-ends text-default  ".concat(i),children:[t.map(((e,t)=>{const{mainCategoryName:n}=e;return(0,o.jsxs)("div",{className:"flex bg-custom mx-1 my-1 text-xs rounded-md",children:[(0,o.jsxs)("span",{className:"mx-1 px-2 py-1",children:["#",n]}),(0,o.jsx)("span",{className:"flex items-center text-bold rounded-md cursor-pointer px-1 hover-destructive hover-text-custom",onClick:()=>(e=>{const t=h(e);r(t)})(t),children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-x",children:[(0,o.jsx)("path",{d:"M18 6 6 18"}),(0,o.jsx)("path",{d:"m6 6 12 12"})]})})]},t)})),t.length>2&&(0,o.jsx)("div",{className:"flex mx-1 my-1 text-xs rounded-md",children:(0,o.jsx)("span",{className:"flex items-center text-bold rounded-md cursor-pointer px-1 hover-destructive hover-text-custom",onClick:()=>{r([])},children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-delete",children:[(0,o.jsx)("path",{d:"M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z"}),(0,o.jsx)("line",{x1:"18",x2:"12",y1:"9",y2:"15"}),(0,o.jsx)("line",{x1:"12",x2:"18",y1:"9",y2:"15"})]})})})]}),(0,o.jsx)("div",{className:"flex justify-ends",children:(0,o.jsx)("div",{className:"min-w-md",children:(0,o.jsx)(a.Z,{placeholder:"Type and press Enter to select",labelName:"Related Tags",...l,onKeyDown:(e,n)=>{if("Enter"===n.key){if(!e)return;d(""),c(e)}if("Backspace"===n.key&&0===e.length){const e=t.length,n=h(e-1);r(n)}},onChange:(e,t)=>{d(e)},onSuggestionClick:(e,t)=>{r(t)},onCreate:(e,t)=>{c(e),d("")},value:u,selectedOptions:t,suggestions:n,labelKey:"mainCategoryName",idKey:"id",hasCreateNew:!1})})})]})})}},1686:(e,t,n)=>{n.d(t,{Z:()=>c});var s=n(2791),a=n(7323),o=n(2817),r=n(9429);const c=()=>{const[e,t]=(0,s.useState)([]),[n,c]=(0,s.useState)([]),[i,l]=(0,s.useState)("none"),[u,d]=(0,s.useState)(!1),{toast:h}=(0,o.p)(),{logout:g}=(0,r.Z)(),y=(e,t)=>{t&&d(0===e.length||e.length%t!==0)};return{categoryData:n,isAllDataFetched:u,categories:e,fetchStatus:i,fetchMyPostCategories:async e=>{const{limit:t}=e||{};try{l("loading");const n=await a.Zk(e);return y(n,t),0===n.length?l("empty"):(l("success"),setTimeout((()=>{}),1e3)),n}catch(n){const{statusCode:e}=n||{};throw 401===e&&g(),l("failure"),n}},fetchPostCategories:async e=>{const{limit:t}=e||{};try{l("loading");const n=await a.hk(e);return y(n,t),0===n.length?l("empty"):(l("success"),setTimeout((()=>{}),1e3)),n}catch(n){const{statusCode:e}=n||{};401===e?(g(),l("unauthorised")):l("failure")}},fetchPostCategoryByName:async e=>{try{l("loading");const t=await a.wG(e);return c(t),l("success"),t}catch(t){l("failure")}},savePostCategory:async e=>(async e=>{try{const t=await a.t4(e);return h({heading:"Post Category created successfully!",description:"Your post Category is now in review, but will be approved by admin soon!",options:{position:"top-right"}}).success(),t}catch(t){const{message:e="Something went wrong"}=t||{};throw e}})(e),deletePostCategory:async e=>{try{const t=await a.Bg(e);return h({heading:"Post Category deleted successfully!",description:"Your post category has been successfully deleted!",options:{position:"top-right"}}).success(),t}catch(t){const{message:e,statusCode:n}=t;throw 401===n&&g(),h({heading:"Oops! There was an error deleting your post category.",description:e,options:{position:"top-right"}}).error(),t}},restorePostCategory:async e=>{try{const t=await a.N_(e);return h({heading:"Post Category restored successfully!",description:"Your post category has been successfully restored!",options:{position:"top-right"}}).success(),t}catch(t){const{message:e}=t;throw h({heading:"Oops! There was an error restoring your post category.",description:e,options:{position:"top-right"}}).error(),t}}}}},7323:(e,t,n)=>{n.d(t,{Bg:()=>m,Yl:()=>g,Zk:()=>i,rP:()=>l,zg:()=>u,hk:()=>d,wG:()=>h,N_:()=>x,t4:()=>p,ZV:()=>y,$A:()=>w});var s=n(8777),a=n(3003);var o=n(3630);const r=e=>{const{category_name:t,category_slug:n,category_icon:s,posts_count:a,followers_count:r,created_at:c,full_name:i="Admin",user_name:l,category_id:u,is_following:d,verified:h}=e;return{id:u,categoryName:t,categorySlug:n,categoryIcon:s,followers:r,posts:a,createdUser:i,createdUserName:l,createdAt:(0,o.B)(c),isFollowing:!!d,isVerified:!!Number(h)}},c=e=>{const{main_category_name:t,main_category_slug:n,created_at:s,main_category_id:a}=e;return{id:a,mainCategoryName:t,mainCategorySlug:n,createdAt:(0,o.B)(s)}},i=async function(e){try{const t=await async function(e){const t=(0,a.KB)(s._n+"postCategories/my",e);return new a.ZP(t).get().then((e=>e)).catch((e=>{throw e}))}(e),{data:n=[]}=t;return n.map(r)||[]}catch(t){throw t}},l=async function(e){const t=await async function(e){return new a.ZP("".concat(s._n,"postCategories/my/").concat(e)).get().then((e=>e)).catch((e=>{throw e.response}))}(e),{data:n=[]}=t,o=(e=>{const{main_categories:t,...n}=e;return{...r(n),mainCategories:t.map(c)}})(n);return o||[]},u=async function(e){try{const t=await async function(e){const t=(0,a.KB)(s._n+"postMainCategories",e);return new a.ZP(t).get().then((e=>e)).catch((e=>{throw e}))}(e),{data:n=[]}=t;return n.map(c)||[]}catch(t){throw t}},d=async function(e){try{const t=await async function(e){const t=(0,a.KB)(s._n+"postCategories",e);return new a.ZP(t).get().then((e=>e)).catch((e=>{throw e}))}(e),{data:n=[]}=t;return n.map(r)||[]}catch(t){throw t}},h=async function(e){const t=await async function(e){return new a.ZP(s._n+"postCategories/".concat(e)).get().then((e=>e)).catch((e=>{throw e.response}))}(e),{data:n=[]}=t;return r(n)||{}},g=async function(e){try{await async function(e){return new a.ZP(s._n+"postCategories/".concat(e,"/follow")).post().then((e=>e)).catch((e=>{throw e}))}(e);return!0}catch(t){throw t}},y=async function(e){try{await async function(e){return new a.ZP(s._n+"postCategories/".concat(e,"/unfollow")).post().then((e=>e)).catch((e=>{throw e}))}(e);return!0}catch(t){throw t}},p=async function(e){try{const t=await async function(e){return new a.ZP(s._n+"postCategories").post(e).then((e=>e)).catch((e=>{throw e}))}(e),{data:n=[]}=t;return r(n)}catch(t){throw t}},w=async function(e,t){try{const n=await async function(e,t){return new a.ZP(s._n+"postCategories/".concat(t)).put(e).then((e=>e)).catch((e=>{throw e.response}))}(e,t),{data:o=[]}=n;return r(o)}catch(n){throw n}},m=async function(e){try{return await async function(e){return new a.ZP(s._n+"postCategories/".concat(e)).delete().then((e=>e)).catch((e=>{throw e}))}(e)}catch(t){throw t}},x=async function(e){try{return await async function(e){return new a.ZP(s._n+"postCategories/".concat(e,"/restore")).post().then((e=>e)).catch((e=>{throw e}))}(e)}catch(t){throw t}}}}]);
//# sourceMappingURL=400.ed94b0c8.chunk.js.map